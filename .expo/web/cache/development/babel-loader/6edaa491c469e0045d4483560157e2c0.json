{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { signUp } from \"../API/todoAPI\";\nimport { TokenContext } from \"../Context/Context\";\nimport { UsernameContext } from \"../Context/Context\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function SignUp() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      login = _useState2[0],\n      setLogin = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      copyPassword = _useState6[0],\n      setCopyPassword = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      error = _useState8[0],\n      setError = _useState8[1];\n\n  var _useState9 = useState(true),\n      _useState10 = _slicedToArray(_useState9, 2),\n      visible = _useState10[0],\n      setVisible = _useState10[1];\n\n  var getSignedUp = function getSignedUp(setToken, setUsername) {\n    setError('');\n    if (login == '' || password == '' || copyPassword == '') return;\n\n    if (password != copyPassword) {\n      setError(\"Passwords don't match\");\n      return;\n    }\n\n    setVisible(false);\n    signUp(login, password).then(function (token) {\n      setUsername(login);\n      setToken(token);\n      console.log('token', token);\n    }).catch(function (err) {\n      setError(err.message);\n    });\n    setVisible(true);\n  };\n\n  return _jsx(TokenContext.Consumer, {\n    children: function children(_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          token = _ref2[0],\n          setToken = _ref2[1];\n\n      return _jsx(UsernameContext.Consumer, {\n        children: function children(_ref3) {\n          var _ref4 = _slicedToArray(_ref3, 2),\n              username = _ref4[0],\n              setUsername = _ref4[1];\n\n          return _jsx(View, {\n            children: visible ? _jsxs(_Fragment, {\n              children: [_jsxs(View, {\n                style: {\n                  flexDirection: 'row'\n                },\n                children: [_jsx(Text, {\n                  style: styles.label,\n                  children: \"Login\"\n                }), _jsx(TextInput, {\n                  style: styles.text_input,\n                  onChangeText: setLogin,\n                  onSubmitEditing: function onSubmitEditing() {\n                    return getSignedUp(setToken, setUsername);\n                  },\n                  value: login\n                })]\n              }), _jsxs(View, {\n                style: {\n                  flexDirection: 'row'\n                },\n                children: [_jsx(Text, {\n                  style: styles.label,\n                  children: \"Password\"\n                }), _jsx(TextInput, {\n                  style: styles.text_input,\n                  onChangeText: setPassword,\n                  secureTextEntry: true,\n                  onSubmitEditing: function onSubmitEditing() {\n                    return getSignedUp(setToken, setUsername);\n                  },\n                  value: password\n                })]\n              }), _jsxs(View, {\n                style: {\n                  flexDirection: 'row'\n                },\n                children: [_jsx(Text, {\n                  style: styles.label,\n                  children: \"Password Again\"\n                }), _jsx(TextInput, {\n                  style: styles.text_input,\n                  onChangeText: setCopyPassword,\n                  secureTextEntry: true,\n                  onSubmitEditing: function onSubmitEditing() {\n                    return getSignedUp(setToken, setUsername);\n                  },\n                  value: copyPassword\n                })]\n              }), _jsx(Button, {\n                onPress: function onPress() {\n                  return getSignedUp(setToken, setUsername);\n                },\n                title: \"Sign Up\"\n              }), error ? _jsx(Text, {\n                style: styles.text_error,\n                children: error\n              }) : []]\n            }) : _jsx(ActivityIndicator, {})\n          });\n        }\n      });\n    }\n  });\n}\nvar styles = StyleSheet.create({\n  label: {\n    width: 70\n  },\n  text_error: {\n    color: 'red'\n  },\n  text_input: {\n    backgroundColor: 'white',\n    margin: 5\n  }\n});","map":{"version":3,"names":["React","useState","signUp","TokenContext","UsernameContext","SignUp","login","setLogin","password","setPassword","copyPassword","setCopyPassword","error","setError","visible","setVisible","getSignedUp","setToken","setUsername","then","token","console","log","catch","err","message","username","flexDirection","styles","label","text_input","text_error","StyleSheet","create","width","color","backgroundColor","margin"],"sources":["/home/tutur/Documents/Travail/Master/M2/S1/IHM - Visualisation de Donnees/project/components/SignUp.js"],"sourcesContent":["import React, { useState } from 'react'\nimport {\n  Text,\n  TextInput,\n  Button,\n  View,\n  StyleSheet,\n  ActivityIndicator\n} from 'react-native'\n\nimport { signUp } from '../API/todoAPI'\n\nimport { TokenContext } from '../Context/Context'\nimport { UsernameContext } from '../Context/Context'\n\nexport default function SignUp () {\n  const [login, setLogin] = useState('')\n  const [password, setPassword] = useState('')\n  const [copyPassword, setCopyPassword] = useState('')\n  const [error, setError] = useState('')\n  const [visible, setVisible] = useState(true)\n\n  const getSignedUp = (setToken, setUsername) => {\n    setError('')\n    if (login == '' || password == '' || copyPassword == '') return\n    if (password != copyPassword){\n        setError(\"Passwords don't match\")\n        return\n    } \n    setVisible(false)\n    signUp(login, password)\n      .then(token => {\n        setUsername(login)\n        setToken(token)\n        console.log('token', token)\n      })\n      .catch(err => {\n        setError(err.message)\n      })\n    setVisible(true)\n  }\n\n  return (\n    <TokenContext.Consumer>\n      {([token, setToken]) => (\n        <UsernameContext.Consumer>\n          {([username, setUsername]) => {\n            return (\n              <View>\n                {visible ? (\n                  <>\n                    <View style={{ flexDirection: 'row' }}>\n                      <Text style={styles.label}>Login</Text>\n                      <TextInput\n                        style={styles.text_input}\n                        onChangeText={setLogin}\n                        onSubmitEditing={() =>\n                          getSignedUp(setToken, setUsername)\n                        }\n                        value={login}\n                      />\n                    </View>\n                    <View style={{ flexDirection: 'row' }}>\n                      <Text style={styles.label}>Password</Text>\n                      <TextInput\n                        style={styles.text_input}\n                        onChangeText={setPassword}\n                        secureTextEntry={true}\n                        onSubmitEditing={() =>\n                          getSignedUp(setToken, setUsername)\n                        }\n                        value={password}\n                      />\n                    </View>\n                    <View style={{ flexDirection: 'row' }}>\n                      <Text style={styles.label}>Password Again</Text>\n                      <TextInput\n                        style={styles.text_input}\n                        onChangeText={setCopyPassword}\n                        secureTextEntry={true}\n                        onSubmitEditing={() =>\n                          getSignedUp(setToken, setUsername)\n                        }\n                        value={copyPassword}\n                      />\n                    </View>\n                    <Button\n                      onPress={() => getSignedUp(setToken, setUsername)}\n                      title='Sign Up'\n                    />\n                    {error ? (\n                      <Text style={styles.text_error}>{error}</Text>\n                    ) : (\n                      []\n                    )}\n                  </>\n                ) : (\n                  <ActivityIndicator />\n                )}\n              </View>\n            )\n          }}\n        </UsernameContext.Consumer>\n      )}\n    </TokenContext.Consumer>\n  )\n}\n\nconst styles = StyleSheet.create({\n  label: {\n    width: 70\n  },\n  text_error: {\n    color: 'red'\n  },\n  text_input: {\n    //borderWidth: 1,\n    backgroundColor: 'white',\n    margin: 5\n  }\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}